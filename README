pppoe模式的深澜校园网络认证客户端的linux实现

2014年10月哈工程校园网认证升级，以前是锐捷，直接用华科大那个mentohust放路由器上的
马上毕业了还折腾人，更换为pppoe模式的深澜，版本号117
没办法自己动手丰衣足食把。

pppoe模式的深澜原理超简单：1、用户名每字符后移4，并加上{SRUN3}\r\n前缀；2、定时发送UDP心跳包。

srun.c是ppp的插件，修改用户名，并在拨号成功后启动发送心跳
编译为srun.so，编译方法见ppp-2.4.5.tar的PLUGINS文件
openwrt/desktop：在pppoe拨号脚本里面加上plugin /{path}/srun.so参数
tomato：在WAN / Internet > Options里面填上plugin /{path}/srun.so
ddwrt：我换了不下20个toolchains，编译出来在ddwrt上都是段错误，呵呵放弃

test.c是发送心跳包的程序，默认放在/jffs/test路径上，这个路径在srun.c 50行写死了。。。。。。懒啊
ppp拨号成功后会启动这个test  发送心跳，断线杀死

recv.c是接受srun.c产生的消息的，但是在tomato固件上msgget相关函数会段错误，没搞定，后来把消息队列去掉了，直接使用ppp的info函数把消息打印到路由日志里了
但是那个版本的源代码弄丢了，现在只能在我路由器上找到编译好的so和test了，也懒得再改一次了


ppp-2.4.5.tar.gz 是ppp源码  编译ppp插件需要


ras_acsii.7z是用MFC写的win版实现的源码。
对于国产软件0容忍，QQ什么的我都扔虚拟机，这种莫名其妙的拨号软件我能去用？？擦
在linux版开工前，要先能上网啊，在虚拟机用OD动态跟了一下深澜客户端，弄明白它pppoe的时候调了哪些函数，参数是啥
然后MFC快速出一个能用的版本暂时顶着能上网再说，开写linux版

一直只自己和认识的几个人在用，期间学校出现过公开卖“深澜破解”的，看过他们，就是一个发心跳的程序放到启动脚本里面。
有次我们实验室一女生拿一个路由过来给我让帮“破解”下，说找学校公开卖的那些人没搞定。看了一下，这路由是mipsel的U。
那帮子人直接把编译给mips的程序扔上去，能跑起来才怪啊。
我们学校基本都是255d那个路由....便宜淘宝40块，拿回来就卖200
现在也毕业大半年了， 都放出来把。